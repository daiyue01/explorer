
<script>
    var last_height = [:=last_height:];
</script>

<div id="dfcts" >
    <div class="container">
        <div class="wrap">
            <div class="tt"><p>近180天算力相对波动：</p></div>
            <canvas id="dfcts_canvas">
                您的浏览器不支持canvas标签。
            </canvas>
        </div>
    </div>
</div>

<div id="blocks" >
    <div class="container">
        <div class="wrap">
            <h1 class="pt">最近出块：<span class="tv">{{last_cuttime}}s 后自动更新</span></h1>
            <div class="con">
                <table>
                    <tr class="hd">
                        <th>高度</th>
                        <th>哈希</th>
                        <th>交易数</th>
                        <th>难度目标</th>
                        <th>播报方</th>
                        <th class="mbn">区块奖励</th>
                        <th>奖励地址</th>
                        <th>区块创建时间</th>
                    </tr>
                    <tr class="row" v-for="one in blocks">
                        <td class="t1 blue">{{one.height}}</td>
                        <td class="t2 gray dts" @click="prompt('区块哈希：', one.hash)">{{one.hash.substr(0,20)+'...'}}</td>
                        <td class="t3">{{one.txs}}</td>
                        <td class="t4 gray">{{one.bitstr}}</td>
                        <td class="t5 sienna">{{one.rewards.message=='unknown'?'':one.rewards.message}}</td>
                        <td class="t6">{{one.rewards.amount}}</td>
                        <td class="t7 gray dts" @click="prompt('奖励地址：', one.rewards.address)">{{one.rewards.address.substr(0,12)+'...'}}</td>
                        <td class="t8 gray">{{formatDate(new Date(one.time*1000), 'yyyy-MM-dd hh:mm:ss').replace('','')}}</td>
                    </tr>
                </table>
                <!--
                <div class="item" for="one in blocks">
                    <p>{{one.height}}</p>
                    <p title="播报方">{{one.rewards.message=='hacash.org'?'':one.rewards.message}}</p>
                    <p title="交易数量">{{one.txs}}</p>
                    <p title="目标难度值">{{one.bits}}</p>
                    <p title="区块奖励">{{one.rewards.amount}}</p>
                    <p class="wide">{{new Date(one.time*1000).toLocaleString()}}</p>
                    <p class="block">{{one.hash}}</p>
                    <p class="block">{{one.rewards.address}}</p>
                </div>
                -->
                <div class="more" v-show="showMoreBtn">
                    <a class="button" @click="queryMoreDatas">查看更多</a>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="transfers" >
    <div class="container">
        <div class="wrap">
            <h1 class="pt">最近转账：<span class="refresh" @click="refresh"  v-show="refreshBtn">{{refreshTip}}</span></h1>
            <div class="con">
                <table>
                    <tr class="hd">
                        <th>区块高度</th>
                        <th>From地址</th>
                        <th>To地址</th>
                        <th>金额</th>
                        <th>确认时间</th>
                    </tr>
                    <tr class="row" v-for="one in transfers">
                        <td class="t0">{{one[0]}}</td>
                        <td class="t1">{{one[1]}}</td>
                        <td class="t2">{{one[2]}}</td>
                        <td class="t3"><b>{{one[3]}}</b></td>
                        <td class="t4">{{formatDate(new Date(one[4]*1000), 'MM-dd hh:mm')}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>    
</div>