function CreateLifeGameInitialSVG(r,e,n,t){var l=HEX_TO_U8ARY(r),o=U8ARY_TO_BITS(l),a=0;function i(r){var e=l[a];return a++,e%r==1}var c=0;var u="black",f="green",v="rect",s=!1,g=!1,p=!1,y=!1,d=!1;i(11)&&(v="circle"),i(11)&&(v="rhombus"),i(41)&&(v="cube"),i(21)&&(f="#cd0b20"),i(21)&&(y=!0),i(41)&&(p=!0),i(11)&&(s=!0,"rect"==v&&(v="rectcor")),i(11)&&(g=!0),i(11)&&(u="silver"),i(21)&&(u="none"),i(41)&&(u="#daad7b","green"==f&&(f=n)),i(41)&&(d=!0);var h=t?0:10,b=[],m=g?' rx="20" ry="20" ':"";function w(r,e,n,t,l,o,a){var i="",u=h+10+10*o,v=h+10+10*a,s=u+5,g=v+5;switch(e){case"cube":var p=u-4+","+(v-4),y=u+4+","+(v-4),d=u-4+","+(v+4),b=u+4+","+(v+4),m=u+8+","+v,w=u+8+","+(v+8),x=u+","+(v+8);r.push('<polygon points="'+y+" "+m+" "+w+" "+b+'" fill="#10b310" />'),r.push('<polygon points="'+d+" "+x+" "+w+" "+b+'" fill="#015801" />'),i='<polygon points="'+p+" "+y+" "+b+" "+d+'" ';break;case"rect":case"rectcor":var F=10,E=3;n&&(F=15,u-=2.5,v-=2.5,E=5),i='<rect x="'+u+'" y="'+v+'" width="'+F+'" height="'+F+'" '+("rectcor"==e?' rx="'+E+'" ry="'+E+'" ':"");break;case"circle":E=4;n&&(E=7),i='<circle cx="'+s+'" cy="'+g+'" r="'+E+'"';break;case"rhombus":var T=6;n&&(T=9),i='<polygon points="'+(p=s+","+(g-T))+" "+(y=s+T+","+g)+" "+(d=s+","+(g+T))+" "+(b=s-T+","+g)+'"'}var A=f;return(l||t)&&(A=function(r,e,n){if(r&&e*n!=0&&15!=e&&15!=n)return f;var t=["red","orange","yellow","green","cyan","blue","purple"],l=t[((e+1)*n+c)%t.length];return c++,l}(l,o,a)),i+' fill="'+A+'" />'}b.push('<rect x="'+h+'" y="'+h+'" width="180" height="180" '+m+' fill="'+u+'" />');for(var x=0;x<16;x++)for(var F=0;F<16;F++){o[16*x+F]&&b.push(w(b,v,s,p,y,x,F))}var E="",T="";if(d){E='style="transform: scale(0.66666666667); transform-origin: center;"',T="<g>";var A=["#041B2D","#004E9A","#8A5082","#6F5F90","#8A5082","#FF7B89","#F7D6E0","#E5C1CD","#EFF7F6","#F3DBCF","#AAC9CE","#F2B5D4","#7BDFF2","#85CBCC","#F9E2AE","#daad7b"],B=200,C=[0,200][l[31]%2],k=[0,200][l[30]%2];function S(r,e){return'<ellipse cx="'+C+'" cy="'+k+'" rx="'+r+'" ry="'+r+'" fill="'+e+'"/>'}for(var x in A=l[29]%2?A:A.reverse()){T+=S(B=200-7*x,A[x])}T+=S(B-=7,n)+"</g>"}var D=null;y&&(D="part"),p&&(D="full");var I=t?180:200;return['<svg class="dvhip9" version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+I+" "+I+'" width="'+e+'" height="'+e+'">'+T+"<g "+E+">"+b.join("")+"</g></svg>",{gene:l,points:o,background:u,lifecolor:f,colorful:D,irregular:d}]}function StartPlayLifeGame(r,e,n,t,l){"none"==e.background&&(e.background=null);var o=256*n,a="width:"+o+"px; height:"+o+"px; ",i=e.background||l||"#000";r.innerHTML='<canvas class="lgcvs" id="lgcvs" width="'+o+'" height="'+o+'" style="'+a+'"></canvas><div id="lgret"></div>',console.log(e);var c=function(r,n){var t=["red","orange","yellow","green","cyan","blue","purple"];return e.colorful&&("part"!=e.colorful||r<85||r>170||n<85||n>170)?(rtcl=t[(r*n+r+n)%t.length],rtcl):e.lifecolor},u=document.getElementById("lgcvs").getContext("2d"),f=document.getElementById("lgret"),v=256,s=[];!function(){for(var r=[],n=0;n<v;n++)r.push(new Array(256));for(n=0;n<16;n++)for(var t=0;t<16;t++){var l=16*n+t;r[120+n][120+t]=e.points[l]}s=r}();var g={},p=0,y=0;function d(){u.fillStyle=i,console.log(i),u.fillRect(0,0,v*n,v*n)}function h(r){u.fillStyle=c(1,1);for(var e=0,t=0;t<v;t++)for(var l=r[t],o=t*n,a=0;a<v;a++){if(l[a]){e+=1;var i=t+","+a;g[i]?g[i]+=1:(g[i]=1,p+=1);var f=a*n;u.fillStyle=c(t,a),u.fillRect(o,f,n,n)}}return[e,p]}function b(r,e,n,t){for(var l=e-1,o=n-1,a=0,i=l;i<l+3;i++)if(!(i<0||i>=t))for(var c=o;c<o+3;c++)c<0||c>=t||i==e&&c==n||r[i][c]&&a++;return a}d(),h(s);var m=!1,w=null,x=0;function F(){s=function(r){for(var e=[],n=0;n<v;n++)e.push(new Array(256));for(n=0;n<v;n++)for(var t=0;t<v;t++){var l=r[n][t],o=b(r,n,t,v),a=0;(3==o||l&&2==o)&&(a=1),e[n][t]=a}return e}(s),d();var r=h(s),e=w;if(e&&e[0]==r[0]&&e[1]==r[1]?x+=1:x=0,x>=10)return m=!0,clearTimeout(E),void function(){m=!0,clearTimeout(E);for(var r=0,e=0;e<v;e++)for(var t=0;t<v;t++){var l=0==e||e==v-1||0==t||t==v-1,o=s[e][t];o&&l&&(r+=1)}areacounts=function(r){u.fillStyle="#088";var e=0,t=0;for(var l in r){var o=r[l];t+=o,e++;var a=l.split(","),i=parseInt(a[0]),c=parseInt(a[1]),f=n;(o+=25)>255&&(o=255),u.fillStyle="rgb("+o+",25,25)",u.fillRect(i*f,c*f,f,f)}return[t,e]}(g),lifecounts=h(s),f.innerText="Vitality: "+areacounts[0]+", Territory: "+areacounts[1]+", Times: "+y+", Living: "+lifecounts[0]+", Expedition: "+r,f.style.opacity=1}();w=r}var E=null;E=setTimeout(function r(){m||(y+=1,F(),E=setTimeout(r,t))},1e3)}